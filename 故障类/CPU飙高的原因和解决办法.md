[TOC]

# CPU飙高的原因和解决办法

#### 应用负载（QPS）高

这种情况 SQL 查询优化的余地不大，建议考虑从应用架构、实例规格等方面来解决：

- 升级实例规格，增加 CPU 资源。
- 增加只读实例，将对数据一致性不敏感的查询（比如商品种类查询、列车车次查询）转移到只读实例上，分担主实例压力。
- 使用阿里云 DRDS 产品，自动进行分库分表，将查询压力分担到多个 RDS 实例上。
- 使用阿里云 Memcache 或者云 Redis 产品，常用的查询结果尽量从缓存中获取，减轻 RDS 实例压力。
- 对于查询数据比较静态、查询重复度高、查询结果集小于 1 MB 的应用，考虑开启查询缓存（Query Cache）。
- 定期归档历史数据、采用分库分表或者分区的方式减小查询访问的数据量。
- 尽量优化查询，减少查询的执行成本（逻辑IO，执行需要访问的表数据行数），提高应用可扩展性。

** 注：能否从开启查询缓存（Query Cache）中获益需要经过测试，具体设置请参考 RDS MySQL 查询缓存（Query Cache）的设置和使用。**

#### 查询语句执行成本（查询访问表数据行数）高

**解决的原则**：定位效率低的查询，优化查询的执行效率，降低查询执行的成本。